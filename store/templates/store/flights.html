{% extends 'base.html' %}

{% block page %}
<div class="container-fluid mt-3">
    <div class="card text-center">
        <div class="card-body">
            <form action="/store/flights" method="POST">
                {% csrf_token %}
                <div class="form-row">
                    <div class="col-lg-4">
                        <input type="text" name='from' class="form-control" value="{{fromloc}}" placeholder="From">
                    </div>
                    <div class="col-lg-4">
                        <input type="text" name='to' class="form-control" value="{{toloc}}" placeholder="To">
                    </div>
                    <div class="col-lg-3">
                        <input type="date" name='date' value="{{tdate}}" class="form-control">
                    </div>
                    <div class="col">
                        <input type="submit" value="Search" class="btn btn-primary float-right">
                    </div>
                </div>
            </form>
        </div>
      </div>
</div>
<div class="container-fluid mt-3">
    <div class="row">
      <div class="col-lg-3 mx-auto">
        <div class="list-group">
          <a href="/store/flights" class="list-group-item list-group-item-action list-group-item-dark">All</a>
          <a href="/store/flights" class="list-group-item list-group-item-action list-group-item-dark">1</a>
          <a href="/store/flights" class="list-group-item list-group-item-action list-group-item-dark">2</a>
          <!-- <form>
            <div class="form-group">
              <label for="formControlRange">Example Range input</label>
              <input type="range" class="form-control-range" id="formControlRange">
            </div>
          </form> -->
        </div>
      </div>
      <div class="col-lg-8 mx-auto">
          {% for flt in flights %}
        <div class="row mx-auto mb-3">
            <div class="card w-100 text-center">
                <div class="card-body">
                    <div class="row">
                        <div class="col-8"><h5 class="card-title float-left ml-2">{{flt.airline}} - {{flt.code}}</h5></div>
                        <div class="col"><h6 class="card-text mr-4">{{flt.time}}</h6></div>
                    </div>
                    <div class="row mx-auto mt-3">
                        <p class="card-text mx-auto">{{flt.fromdest}} -> {{flt.todest}}</p> 
                        <p class="card-text mx-auto">Duration - {{flt.duration}}</p>
                        <h6 class="card-text mx-auto">Price - {{flt.price}} </h6>
                    </div>
                    <button type="button" class="btn btn-primary float-right" data-toggle="modal" data-target="#{{flt.code}}">
                        Book Now !
                    </button>
                    <!-- Modal -->
                    <div class="modal fade" id="{{flt.code}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <!-- Vertically centered modal -->
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Flight Details</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body">
                                <div class="m-2 p-2">
                                    <div class="row">
                                        <div class="col-8"><h5 class="card-title float-left ml-2">{{flt.airline}} - {{flt.code}}</h5></div>
                                        <div class="col"><h6 class="card-text mr-4">{{flt.time}}</h6></div>
                                    </div>
                                    <div class="row mx-auto mt-3">
                                        <p class="card-text mx-auto">{{flt.fromdest}} -> {{flt.todest}}</p> 
                                        <p class="card-text mx-auto">Duration - {{flt.duration}}</p>
                                        <h6 class="card-text mx-auto">Price - {{flt.price}} </h6>
                                    </div>
                                    <div class="row mx-auto mt-3">
                                        <p class="card-text mx-auto">On Board Wifi - {{flt.obw}}</p>
                                        <p class="card-text mx-auto">Baggage Limit - {{flt.baggage_lim}}</p>
                                        <p class="card-text mx-auto">Airport Name - {{flt.apt_name}}</p>
                                        <p class="card-text mx-auto">Airport Name - {{flt.apt_name}}</p>
                                    </div>
                                    <div class="row mx-auto mt-3">
                                        {% if flt.nsle %}
                                        <p class="card-text mx-auto">Number of Seats remaining in Economy - {{flt.nsle}}</p>
                                        {% endif %}
                                        {% if flt.nslb %}
                                        <p class="card-text mx-auto">Number of Seats remaining in Business - {{flt.nslb}}</p>
                                        {% endif %}
                                        {% if flt.nslf %}
                                        <p class="card-text mx-auto">Number of Seats remaining in First Class - {{flt.nslf}}</p>
                                        {% endif %}
                                    </div>
                                    {% if flt.nsle %}
                                    <a class="btn btn-outline-primary float-right mt-3" href="/store/book">Book Now !</a>
                                    <!-- <input type="submit" value="Book Now !" class="btn btn-outline-primary float-right mt-3"> -->
                                    {% else %}
                                    <input type="submit" value="No seats left" disabled class="btn btn-outline-danger float-right mt-3">
                                    {% endif %}
                                </div>
                            </div>
                            <div class="modal-footer">
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
      </div>
    </div>
    
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>


{% endblock %}